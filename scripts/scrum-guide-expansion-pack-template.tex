\documentclass[11pt,a4paper]{article}

% Essential packages for Unicode and multilingual support
\usepackage{fontspec}
\usepackage{polyglossia}

% Page layout and spacing
\usepackage{geometry}
\geometry{a4paper, margin=2.5cm}
\usepackage{setspace}
\onehalfspacing

% Graphics and image support
\usepackage{graphicx}
\usepackage{float}
\usepackage{wrapfig}

% Advanced layout and positioning
\usepackage{multicol}
\usepackage{array}
\usepackage{tabularx}
\usepackage{adjustbox}
\usepackage{longtable}
\usepackage{booktabs}

% Color and styling
\usepackage{xcolor}
\usepackage{tikz}
\usepackage{hyperref}

% Header and footer
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\rfoot{\thepage}
\renewcommand{\headrulewidth}{0pt}

% Font configuration - will be overridden by pandoc variables
\defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}

% Set main font if provided
$if(mainfont)$
\setmainfont{$mainfont$}
$endif$

% Set sans font if provided  
$if(sansfont)$
\setsansfont{$sansfont$}
$endif$

% Set mono font if provided
$if(monofont)$
\setmonofont{$monofont$}
$endif$

% RTL language support
$if(romanfont)$
\newfontfamily\romanfont{$romanfont$}
$endif$

% Arabic font support
$if(arabicfont)$
\newfontfamily\arabicfont{$arabicfont$}
$endif$

% CJK font support
$if(CJKmainfont)$
\usepackage{xeCJK}
\setCJKmainfont{$CJKmainfont$}
$endif$

% Language and text direction configuration
$if(lang)$
\setmainlanguage{$lang$}
$endif$

% Metadata
$if(title)$
\title{$title$}
$endif$

$if(author)$
\author{$author$}
$endif$

$if(date)$
\date{$date$}
$endif$

% Define tightlist command for pandoc compatibility
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

% Custom commands for cover page
\newcommand{\coverpage}{
  \begin{titlepage}
    \centering
    
    % Title section
    \vspace*{2cm}
    {\Huge\bfseries $title$ \par}
    \vspace{1cm}
    
    $if(description)$
    {\large $description$ \par}
    \vspace{1.5cm}
    $endif$
    
    % Creators section - will be handled in markdown content
    \vspace{2cm}
    
    \vfill
    
    % Date
    $if(date)$
    {\large $date$ \par}
    $endif$
    
  \end{titlepage}
  \newpage
}

\begin{document}

% Generate cover page
\coverpage

% Table of contents
\tableofcontents
\newpage

% Main content starts here
$body$

\end{document}